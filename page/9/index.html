<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Hexo</title><meta name="author" content="Sakura Yumeno"><meta name="copyright" content="Sakura Yumeno"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://sakurayumeno.github.io/blog/page/9/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://sakurayumeno.github.io/blog/img/avatar.jpg">
<meta property="article:author" content="Sakura Yumeno">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://sakurayumeno.github.io/blog/img/avatar.jpg"><link rel="shortcut icon" href="/blog/img/favicon.png"><link rel="canonical" href="https://sakurayumeno.github.io/blog/page/9/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/blog/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/blog/',
  algolia: undefined,
  localSearch: {"path":"/blog/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Hexo',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-06-16 15:40:20'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/blog/css/custom.css" media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/blog/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/blog/archives/"><div class="headline">文章</div><div class="length-num">144</div></a><a href="/blog/tags/"><div class="headline">标签</div><div class="length-num">77</div></a><a href="/blog/categories/"><div class="headline">分类</div><div class="length-num">37</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/blog/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/blog/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/blog/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/blog/assets/html/"><i class="fa-fw fas fa-file-code"></i><span> HTML</span></a></li><li><a class="site-page child" href="/blog/assets/pdf/"><i class="fa-fw fas fa-file-pdf"></i><span> PDF</span></a></li><li><a class="site-page child" href="/blog/assets/script/"><i class="fa-fw fas fa-terminal"></i><span> Script</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-headphones"></i><span> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/blog/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/blog/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/blog/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/blog/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://s2.loli.net/2023/05/20/AcCUkWhYsL7ZGV6.jpg')"><nav id="nav"><span id="blog-info"><a href="/blog/" title="Hexo"><span class="site-name">Hexo</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/blog/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/blog/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/blog/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/blog/assets/html/"><i class="fa-fw fas fa-file-code"></i><span> HTML</span></a></li><li><a class="site-page child" href="/blog/assets/pdf/"><i class="fa-fw fas fa-file-pdf"></i><span> PDF</span></a></li><li><a class="site-page child" href="/blog/assets/script/"><i class="fa-fw fas fa-terminal"></i><span> Script</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-headphones"></i><span> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/blog/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/blog/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/blog/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/blog/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Hexo</h1><div id="site-subtitle"><span id="subtitle"></span></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/blog/posts/a918773e.html" title="Maintenance">Maintenance</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-05-20T14:00:00.000Z" title="发表于 2023-05-20 22:00:00">2023-05-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/blog/categories/Database/">Database</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/">Oracle</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/ASM/">ASM</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/blog/tags/maintenance/">maintenance</a></span></div><div class="content">Setting Disk Stringalter system set asm_diskstring='ORCL:*' scope=both sid='*';

Creating Disk Groups
CREATE DISKGROUP data NORMAL REDUNDANCY
  FAILGROUP controller1 DISK
    '/devices/diska1' NAME diska1,
    '/devices/diska2' NAME diska2,
    '/devices/diska3' NAME diska3,
    '/devices/diska4' NAME diska4
  FAILGROUP controller2 DISK
    '/devices/diskb1' NAME diskb1,
    '/devices/diskb2' NAME diskb2,
    '/devices/diskb3' NAME diskb3,
    '/devices/diskb4' NAME diskb4
  ATTRIBUTE 'au_size'= ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/blog/posts/d7934161.html" title="Migrate ASM Diskgroup to Another SAN">Migrate ASM Diskgroup to Another SAN</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-05-20T14:00:00.000Z" title="发表于 2023-05-20 22:00:00">2023-05-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/blog/categories/Database/">Database</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/">Oracle</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/ASM/">ASM</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/blog/tags/migrate/">migrate</a></span></div><div class="content">Migrate ASM Diskgroup to Another SAN
if necessary, modify asm_diskstring
alter system set asm_diskstring = '/dev/emcpowerc*','/dev/emcpowerh*' scope=both;

select path from v$asm_disk;

query the fail groups
col path for a20
col state for a10
col failgroup for a15
col name for a15
select dg.name,dg.state,dg.type,d.disk_number,d.path,d.mount_status,d.failgroup,d.name,d.state 
from v$asm_diskgroup dg, v$asm_disk d
where dg.group_number=d.group_number and dg.name='DATA'
order by dg.name,d.disk_numb ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/blog/posts/28a7074e.html" title="PreCheck">PreCheck</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-05-20T14:00:00.000Z" title="发表于 2023-05-20 22:00:00">2023-05-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/blog/categories/Database/">Database</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/">Oracle</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/ASM/">ASM</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/blog/tags/precheck/">precheck</a></span></div><div class="content">PreCheck
System info
# 系统版本 
uname -a
cat /etc/os-release

# ASM 磁盘创建方式：udev or asmlib
# udev:
cat /etc/udev/rules.d/99-oracle-asmdevices.rules

# asmlib:
cat /etc/sysconfig/oracleasm
/etc/init.d/oracleasm listdisks

GI info
# grid 用户查询，群集资源状态，版本，ocr 信息，votedisk 信息 
crsctl stat res -t
asmcmd lsdg
ocrcheck
crsctl query crs activeversion
crsctl query css votedisk

ASM DiskGroup info
-- 数据库版本 
select * from v$version;

-- 磁盘组信息 
set lines 200 pages 100
select d.name group_name,f.type,count(*) cnt f ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/blog/posts/c9d09ad6.html" title="Replace OCR and Voting disks">Replace OCR and Voting disks</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-05-20T14:00:00.000Z" title="发表于 2023-05-20 22:00:00">2023-05-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/blog/categories/Database/">Database</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/">Oracle</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/ASM/">ASM</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/blog/tags/ocr/">ocr</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/blog/tags/voting/">voting</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/blog/tags/replace/">replace</a></span></div><div class="content">OCR
Perform ocr backup
[root@rac1 bin]# ./ocrconfig -manualbackup
rac2     2022/05/06 09:21:54     /u01/app/11.2.0/grid/cdata/rac-cluster/backup_20220506_092154.ocr

[root@rac1 bin]# ./ocrconfig -showbackup
PROT-24: Auto backups for the Oracle Cluster Registry are not available
rac2     2022/05/06 09:21:54     /u01/app/11.2.0/grid/cdata/rac-cluster/backup_20220506_092154.ocr

Perform ocrcheck
[root@rac1 bin]# ./ocrcheck
Status of Oracle Cluster Registry is as follows :
         Version           ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/blog/posts/463891ca.html" title="Swap Voting Disks Across Storage">Swap Voting Disks Across Storage</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-05-20T14:00:00.000Z" title="发表于 2023-05-20 22:00:00">2023-05-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/blog/categories/Database/">Database</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/">Oracle</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/ASM/">ASM</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/blog/tags/voting/">voting</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/blog/tags/swap/">swap</a></span></div><div class="content">Swap Voting Disks Across Storage
Query css votedisk
crsctl query css votedisk;

##  STATE    File Universal Id                File Name Disk group
--  -----    -----------------                --------- ---------
1. ONLINE   73e1c48069d64fefbfc44cd8e65107d8 (ORCL:OCR_VOTE1) [OCR_VOTE]
Located 1 voting disk(s).

Query the fail groups
col path for a20
col state for a10
col failgroup for a15
col name for a15
select dg.name,dg.state,dg.type,d.disk_number,d.path,d.mount_status,d.failgroup,d.name,d.st ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/blog/posts/f173f122.html" title="UDEV SCSI Rules">UDEV SCSI Rules</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-05-20T14:00:00.000Z" title="发表于 2023-05-20 22:00:00">2023-05-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/blog/categories/Database/">Database</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/">Oracle</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/ASM/">ASM</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/blog/tags/udev/">udev</a></span></div><div class="content">UDEV SCSI Rules Configuration In Oracle Linux 5-8For Oracle Automatic Storage Manager (ASM) to use disks, it needs to be able to identify the devices consistently and for them to have the correct ownership and permissions. In Linux you can use ASMLib to manage these tasks, but it is seen as an additional layer of complexity and has never really gained any popularity. Instead, many people use the Linux device manager “udev” to perform these tasks. This article presents a brief overview of setting ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/blog/posts/6df4f1a1.html" title="Automatic Optimizer Statistics Collection">Automatic Optimizer Statistics Collection</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-05-20T14:00:00.000Z" title="发表于 2023-05-20 22:00:00">2023-05-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/blog/categories/Database/">Database</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/">Oracle</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/Configuration/">Configuration</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/blog/tags/statistics/">statistics</a></span></div><div class="content"> 概述    在 Oracle 10g 之前并没有自动收集统计信息的机制，从 Oracle 10g 开始引入了自动收集统计信息的功能，这个功能在 Oracle 10g 中被称为自动统计信息收集（Automatic Statistics Gathering）   在 Oracle 11g 中被称为自动优化器统计信息收集（Automatic Optimizer Statistics Collection）。自动统计信息收集作业能够每天收集普通对象和数据字典的统计信息，但不会收集 X$ 系列表的内部对象统计信息。
  Oracle 的初始化参数 STATISTICS_LEVEL 控制收集统计信息的级别，有三个参数值：  1、 BASIC：收集基本的统计信息   2、 TYPICAL：收集大部分统计信息（数据库的默认设置）  3、 ALL：收集全部统计信息   当使用 Oracle 自动收集统计信息时，必须要确保 Oracle 的参数 STATISTICS_LEVEL 的值为 TYPICAL 或者 ALL。默认值为 TYPICAL，该值可以确保数据库自我管理功能所需求的所有主要统计信息的正确收 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/blog/posts/78416e0d.html" title="Exadata Virtual Machine 11">Exadata Virtual Machine 11</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-05-20T14:00:00.000Z" title="发表于 2023-05-20 22:00:00">2023-05-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/blog/categories/Database/">Database</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/">Oracle</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/Exadata/">Exadata</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/blog/tags/exadata/">exadata</a></span></div><div class="content">Exadata Virtual Machine 11Cell Node:
 软件包下载 
 可到 https://edelivery.oracle.com/ 下载 V46145-01.zip，V27570-01.zip。V46145-01.zip 为 Exadata Cell 11.2.3.2 介质；V27570-01.zip 为 OracleLinux-R5-U7-Server-x86_64-dvd.iso；Oracle 安装包：p10404530_112030_Linux-x86-64_1of7.zip; p10404530_112030_Linux-x86-64_2of7.zipGrid 安装包：p10404530_112030_Linux-x86-64_3of7.zip

 配置 hosts，修改启动内核 
echo "192.168.184.160 oradb01" >> /etc/hosts
echo "192.168.184.170 oracell01" >> /etc/hosts

sed -i 's/^default.*/default=1/' /etc/grub.c ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/blog/posts/35cf2db4.html" title="How to Switch ArchiveLog Mode">How to Switch ArchiveLog Mode</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-05-20T14:00:00.000Z" title="发表于 2023-05-20 22:00:00">2023-05-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/blog/categories/Database/">Database</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/">Oracle</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/Configuration/">Configuration</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/blog/tags/archivelog/">archivelog</a></span></div><div class="content">Enabling ArchiveLog ModeFor Single InstanceOracle 10g and latest
alter system set log_archive_dest_1='location=/archivelog' scope=spfile;

shutdown immediate
startup mount

alter database archivelog;
alter database open;

alter system switch logfile;  -- 切换归档 

For Real Application ClustersOracle 10gR2 and latest
alter system set log_archive_dest_1='location=+ARCH' sid='*' scope=spfile;

srvctl stop database -d coco
srvctl start instance -d coco -i coco1 -o mount

alter database archivelog;
alte ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/blog/posts/41b24805.html" title="Index">Index</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-05-20T14:00:00.000Z" title="发表于 2023-05-20 22:00:00">2023-05-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/blog/categories/Database/">Database</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/">Oracle</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/blog/categories/Database/Oracle/Configuration/">Configuration</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/blog/tags/index/">index</a></span></div><div class="content">
访问索引列的数据一般需要 3 次 IO，Root-Branch-Leaf。访问索引列外的数据需要 4 次 IO，Root-Branch-Leaf- 回表 (TABLE ACCESS BY INDEX ROWID)。 索引对 DML 操作的影响，INSERT &gt; DELETE &gt; UPDATE
[创建索引会引发排序及全表索，排序会非常消耗 CPU 性能，全表锁会阻止 DML 操作]{.red}
索引的三大特点

索引树的高度一般比较低。
索引由索引列存储的值及 ROWID 组成。
索引本身是有序的。

分区表索引

分为全局索引和分区索引。
分区索引，要有使用分区字段条件的场景，否则建议使用全局索引。

count(*)优化
--NULL 和 NOT NULL 不等价，排除 NULL 值，执行计划由 TABLE ACCESS FULL 变为 INDEX FAST FULL SCAN
select count(*) from t where id is not null;

-- 或将列设置 NOT NULL，执行计划为 INDEX FAST FULL SCAN
alter  ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/blog/page/8/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/blog/">1</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/8/#content-inner">8</a><span class="page-number current">9</span><a class="page-number" href="/blog/page/10/#content-inner">10</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/15/#content-inner">15</a><a class="extend next" rel="next" href="/blog/page/10/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/blog/img/avatar.jpg" onerror="this.onerror=null;this.src='/blog/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Sakura Yumeno</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/blog/archives/"><div class="headline">文章</div><div class="length-num">144</div></a><a href="/blog/tags/"><div class="headline">标签</div><div class="length-num">77</div></a><a href="/blog/categories/"><div class="headline">分类</div><div class="length-num">37</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/blog/posts/23f36911.html" title="dracut initqueue swap does not exist">dracut initqueue swap does not exist</a><time datetime="2023-06-15T02:56:24.000Z" title="发表于 2023-06-15 10:56:24">2023-06-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/blog/posts/19ab1444.html" title="Manage Docker as a non-root user">Manage Docker as a non-root user</a><time datetime="2023-06-10T11:44:29.000Z" title="发表于 2023-06-10 19:44:29">2023-06-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/blog/posts/871b8dc0.html" title="LVM Snapshot">LVM Snapshot</a><time datetime="2023-06-10T11:00:00.000Z" title="发表于 2023-06-10 19:00:00">2023-06-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/blog/posts/a703d20e.html" title="Import and Export">Import and Export</a><time datetime="2023-06-10T11:00:00.000Z" title="发表于 2023-06-10 19:00:00">2023-06-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/blog/posts/fdedf5dc.html" title="mysqldump">mysqldump</a><time datetime="2023-06-10T11:00:00.000Z" title="发表于 2023-06-10 19:00:00">2023-06-10</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/blog/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/blog/categories/Database/"><span class="card-category-list-name">Database</span><span class="card-category-list-count">93</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/blog/categories/Database/MySQL/"><span class="card-category-list-name">MySQL</span><span class="card-category-list-count">12</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/blog/categories/Database/MySQL/Configuration/"><span class="card-category-list-name">Configuration</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/blog/categories/Database/MySQL/Installation/"><span class="card-category-list-name">Installation</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/blog/categories/Database/MySQL/Replication/"><span class="card-category-list-name">Replication</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/blog/categories/Database/MySQL/Troubleshooting/"><span class="card-category-list-name">Troubleshooting</span><span class="card-category-list-count">2</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/blog/categories/Database/Oracle/"><span class="card-category-list-name">Oracle</span><span class="card-category-list-count">77</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/blog/categories/Database/Oracle/ASM/"><span class="card-category-list-name">ASM</span><span class="card-category-list-count">8</span></a></li></ul></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/blog/tags/install/" style="font-size: 1.42em; color: #99a6b7">install</a> <a href="/blog/tags/xfs/" style="font-size: 1.1em; color: #999">xfs</a> <a href="/blog/tags/privs/" style="font-size: 1.1em; color: #999">privs</a> <a href="/blog/tags/rman/" style="font-size: 1.34em; color: #99a3b0">rman</a> <a href="/blog/tags/systemd/" style="font-size: 1.18em; color: #999ca1">systemd</a> <a href="/blog/tags/yum/" style="font-size: 1.1em; color: #999">yum</a> <a href="/blog/tags/snapshot/" style="font-size: 1.1em; color: #999">snapshot</a> <a href="/blog/tags/bbed/" style="font-size: 1.1em; color: #999">bbed</a> <a href="/blog/tags/dracut/" style="font-size: 1.1em; color: #999">dracut</a> <a href="/blog/tags/optimization/" style="font-size: 1.18em; color: #999ca1">optimization</a> <a href="/blog/tags/job/" style="font-size: 1.1em; color: #999">job</a> <a href="/blog/tags/ref/" style="font-size: 1.18em; color: #999ca1">ref</a> <a href="/blog/tags/asmlib/" style="font-size: 1.1em; color: #999">asmlib</a> <a href="/blog/tags/ansible/" style="font-size: 1.1em; color: #999">ansible</a> <a href="/blog/tags/image/" style="font-size: 1.18em; color: #999ca1">image</a> <a href="/blog/tags/rootvg/" style="font-size: 1.1em; color: #999">rootvg</a> <a href="/blog/tags/hugepages/" style="font-size: 1.26em; color: #999fa8">hugepages</a> <a href="/blog/tags/share/" style="font-size: 1.1em; color: #999">share</a> <a href="/blog/tags/ilom/" style="font-size: 1.1em; color: #999">ilom</a> <a href="/blog/tags/pacemaker/" style="font-size: 1.34em; color: #99a3b0">pacemaker</a> <a href="/blog/tags/duplication/" style="font-size: 1.1em; color: #999">duplication</a> <a href="/blog/tags/precheck/" style="font-size: 1.1em; color: #999">precheck</a> <a href="/blog/tags/hacmp/" style="font-size: 1.1em; color: #999">hacmp</a> <a href="/blog/tags/exadata/" style="font-size: 1.26em; color: #999fa8">exadata</a> <a href="/blog/tags/archivelog/" style="font-size: 1.18em; color: #999ca1">archivelog</a> <a href="/blog/tags/pxe/" style="font-size: 1.18em; color: #999ca1">pxe</a> <a href="/blog/tags/backup/" style="font-size: 1.34em; color: #99a3b0">backup</a> <a href="/blog/tags/delete/" style="font-size: 1.1em; color: #999">delete</a> <a href="/blog/tags/password/" style="font-size: 1.34em; color: #99a3b0">password</a> <a href="/blog/tags/troubleshooting/" style="font-size: 1.5em; color: #99a9bf">troubleshooting</a> <a href="/blog/tags/powercli/" style="font-size: 1.1em; color: #999">powercli</a> <a href="/blog/tags/migration/" style="font-size: 1.1em; color: #999">migration</a> <a href="/blog/tags/endian/" style="font-size: 1.1em; color: #999">endian</a> <a href="/blog/tags/disk/" style="font-size: 1.18em; color: #999ca1">disk</a> <a href="/blog/tags/maintenance/" style="font-size: 1.1em; color: #999">maintenance</a> <a href="/blog/tags/oswatcher/" style="font-size: 1.1em; color: #999">oswatcher</a> <a href="/blog/tags/upgrade/" style="font-size: 1.1em; color: #999">upgrade</a> <a href="/blog/tags/osi/" style="font-size: 1.1em; color: #999">osi</a> <a href="/blog/tags/replace/" style="font-size: 1.1em; color: #999">replace</a> <a href="/blog/tags/import/" style="font-size: 1.1em; color: #999">import</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/blog/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><span class="card-archive-list-count">15</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/blog/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><span class="card-archive-list-count">129</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">144</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-06-16T07:40:18.742Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Sakura Yumeno</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/blog/js/utils.js"></script><script src="/blog/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (false) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  getScript('https://sdk.jinrishici.com/v2/browser/jinrishici.js').then(() => {
    jinrishici.load(result =>{
      if (false) {
        const sub = []
        const content = result.data.content
        sub.unshift(content)
        typedJSFn.init(sub)
      } else {
        document.getElementById('subtitle').textContent = result.data.content
      }
    })
  })
}
typedJSFn.run(subtitleType)
</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/blog/js/search/local-search.js"></script></div></div></body></html>